# 缠论K线分析工具 - HTML保存功能

## 新功能介绍

现在支持将缠论K线分析结果保存为HTML文件到`results`目录，方便您分享和查看分析结果。

## 功能特性

### 📁 自动保存
- HTML文件自动保存到`results`目录
- 文件命名格式：`{股票代码}_{开始日期}_{结束日期}_{K线类型}.html`

### 📊 支持的数据类型
- **日线数据**：`daily`
- **分钟线数据**：`minute_30`、`minute_15`、`minute_5`等

### 🎨 可视化引擎
- **Plotly版本**：支持丰富的交互功能（拖拽缩放、悬停信息等）
- **Matplotlib版本**：支持鼠标悬停交互

## 文件命名示例

```
sh.600000_2024-01-01_2024-12-25_daily.html         # 日线数据
sz.000001_2024-01-01_2024-12-25_minute_30.html      # 30分钟线
sz.300750_2024-01-01_2024-12-25_minute_5.html       # 5分钟线
```

## 使用方法

1. **运行分析程序**：
   ```bash
   python real_data_chanlun.py
   ```

2. **输入分析参数**：
   - 股票代码（如：sh.600000）
   - 开始日期（如：2024-01-01）
   - 结束日期（如：2024-12-25）
   - 数据类型选择（1-日线，2-分钟线）

3. **自动保存**：
   - 分析完成后，HTML文件会自动保存到`results`目录
   - 控制台会显示保存成功的消息和文件路径

## 依赖要求

确保安装了必要的Python包：

```bash
pip install -r requirements.txt
```

主要依赖：
- `pandas>=1.5.0`
- `plotly>=5.0.0` （推荐使用）
- `matplotlib>=3.5.0`
- `mpld3>=0.5.0` （用于matplotlib版本HTML保存）

## HTML文件特性

### Plotly版本HTML
- ✅ 完整的交互功能
- ✅ 支持拖拽缩放
- ✅ 悬停显示详细数据
- ✅ Y轴调节按钮
- ✅ 成交量柱状图

### Matplotlib版本HTML
- ✅ 鼠标悬停交互
- ✅ 完整的K线显示
- ✅ 分型和笔标记

## 注意事项

1. **results目录**：程序会自动创建，无需手动创建
2. **文件覆盖**：相同参数的分析会覆盖之前的HTML文件
3. **浏览器打开**：直接双击HTML文件即可在浏览器中查看
4. **分享功能**：HTML文件可以轻松分享给他人查看

## 故障排除

### 如果HTML保存失败
1. 检查是否安装了正确的可视化库
2. 确认磁盘空间充足
3. 检查文件写入权限

### matplotlib版本HTML保存问题
如果使用matplotlib版本时遇到HTML保存问题，请安装：
```bash
pip install mpld3
```

### 推荐使用Plotly版本
Plotly版本提供更好的交互体验和HTML兼容性，建议优先使用。